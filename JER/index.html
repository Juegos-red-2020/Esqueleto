
<!DOCTYPE HTML>
<html>
<head>
<title>MARAUDER</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="fuente_juego.css" type="text/css">
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script type="text/javascript" src="phaser.js"></script>
<script type="module" src="game.js"></script>
<style>
	canvas{
		display: block;
    	margin: 0 auto;
	}
</style>
</head>
<body style="background-color: rgb(0, 0, 0);">
	<script>

	$(document).ready(function() {

		var connection = new WebSocket('ws://127.0.0.1:8080/chat');
		connection.onerror = function(e) {
			console.log("WS error: " + e);
		}
		connection.onmessage = function(msg) {
			console.log("WS message: " + msg.data);
			var message = JSON.parse(msg.data)
			$('#chat').val($('#chat').val() + "\n" + message.name + ": " + message.message);
		}
		connection.onclose = function() {
			console.log("Closing socket");
		}
	
	
		$('#send-btn').click(function() {
			var msg = {
				name : $('#nombre').val(),
				message : $('#message').val()
			}
		    $('#chat').val($('#chat').val() + "\n" + msg.name + ": " + msg.message);
			connection.send(JSON.stringify(msg));
		});

	})

	</script>

	<input type="password" id="password" placeholder="ContraseÃ±a"
		style="position: absolute; top: 300px; left: 866px; display: none;">
	<input type="text" id="nombre" placeholder="Nombre"
		style="position: absolute; top: 270px; left: 866px; display: none;" />
	<button id="aceptar"
		style="position: absolute; top: 400px; left: 925px; display: none;">Aceptar</button>
		
	<div style="font-family: fontGame; position: absolute; left: -1000px; visibility: hidden;">.</div>
		
	<div class="panel">
		<input type="text" onfocus="this.value=''" name="message" id="message" placeholder="Message"
			maxlength="80" style="width: 150px; top: 360px; position: absolute; " />
		<button id="send-btn"
			style="position: absolute; top: 360px; left: 175px">Enviar</button>
		<textarea id="chat" rows="20" cols=""
		style="top: 50px; position:absolute; background: transparent; color:white; border-color: black"></textarea>
	</div>
</body>

</html>
